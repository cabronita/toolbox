---

- name: Include data.yml
  ansible.builtin.include_tasks:
    file: data.yml

- name: Include docker.yml
  ansible.builtin.include_tasks:
    file: docker.yml

- name: Include httpd.yml
  ansible.builtin.include_tasks:
    file: httpd.yml

- name: Create group
  ansible.builtin.group:
    name: remi
    state: present
    gid: 1001

- name: Create user
  ansible.builtin.user:
    comment: Remi
    home: /data/remi
    group: remi
    groups: docker,wheel
    name: remi
    password: $6$dRYD3poqWwGd9ctf$/5rQe0wW/NQTRxvO.UEXsQDrbLfXNmob/KkS7LG9zwOC.7Kqbsrd/J2R6MRgQXJXRd46VPJOYaDUbcBAda8vU1
    uid: 1001

- name: Authorize ssh key
  ansible.posix.authorized_key:
    user: remi
    state: present
    key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"

- name: Start arping container
  community.docker.docker_container:
    command: -v 192.168.1.3
    image: cabronita/arping
    name: ip3
    network_mode: host
    restart_policy: "unless-stopped"
    state: started

- name: Start arping container
  community.docker.docker_container:
    command: -v 192.168.1.4
    image: cabronita/arping
    name: ip4
    network_mode: host
    restart_policy: "unless-stopped"
    state: started

- name: Start arping container
  community.docker.docker_container:
    command: -v 192.168.1.15
    image: cabronita/arping
    name: ip15
    network_mode: host
    restart_policy: "unless-stopped"
    state: started

- name: Install java
  ansible.builtin.dnf:
    name: java-17-openjdk
    state: present
